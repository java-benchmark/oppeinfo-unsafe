<div class="ois-form-layout-padding form-readonly" ng-cloak>
  <div>
    <form name="subjectForm" layout="column">
      <md-input-container flex>
        <label>{{'subject.code' | translate}}</label>
        <hois-value value="subject.code"></hois-value>
      </md-input-container>
      <md-input-container flex>
        <label>{{'subject.nameEt' | translate}}</label>
        <hois-value value="subject.nameEt"></hois-value>
      </md-input-container>
      <md-input-container flex>
        <label>{{'subject.nameEn' | translate}}</label>
        <hois-value value="subject.nameEn"></hois-value>
      </md-input-container>
      <md-input-container flex>
        <label>{{'subject.credits' | translate}}</label>
        <hois-value value="subject.credits"></hois-value>
      </md-input-container>
      <md-input-container flex>
        <label>{{'subject.assessment' | translate}}</label>
        <hois-classifier-value ng-model="subject.assessment" main-classifier-code="HINDAMISVIIS"></hois-classifier-value>
      </md-input-container>
      <md-input-container flex>
        <label>{{'subject.assessmentDescription' | translate}}</label>
        <hois-value value="subject.assessmentDescription"></hois-value>
      </md-input-container>
      <md-input-container flex>
        <label>{{'subject.language' | translate}}</label>
        <hois-classifier-value ng-model="subject.languages" main-classifier-code="OPPEKEEL"></hois-classifier-value>
      </md-input-container>
      <md-input-container flex>
        <label>{{'subject.objectivesEt' | translate}}</label>
        <hois-value value="subject.objectivesEt"></hois-value>
      </md-input-container>
      <md-input-container flex>
        <label>{{'subject.objectivesEn' | translate}}</label>
        <hois-value value="subject.objectivesEn"></hois-value>
      </md-input-container>
      <md-input-container flex>
        <label>{{'subject.outcomesEt' | translate}}</label>
        <hois-value value="subject.outcomesEt"></hois-value>
      </md-input-container>
      <md-input-container flex>
        <label>{{'subject.outcomesEn' | translate}}</label>
        <hois-value value="subject.outcomesEn"></hois-value>
      </md-input-container>
      <md-input-container flex>
        <label>{{'subject.descriptionEt' | translate}}</label>
        <hois-value value="subject.descriptionEt"></hois-value>
      </md-input-container>
      <md-input-container flex>
        <label>{{'subject.descriptionEn' | translate}}</label>
        <hois-value value="subject.descriptionEn"></hois-value>
      </md-input-container>
      <md-input-container flex>
        <label>{{'subject.independentStudyEt' | translate}}</label>
        <hois-value value="subject.independentStudyEt"></hois-value>
      </md-input-container>
      <md-input-container flex>
        <label>{{'subject.independentStudyEn' | translate}}</label>
        <hois-value value="subject.independentStudyEn"></hois-value>
      </md-input-container>
      <md-input-container flex>
        <label>{{'subject.studyLiterature' | translate}}</label>
        <hois-value value="subject.studyLiterature"></hois-value>
      </md-input-container>
      <md-input-container flex>
        <label>{{'subject.evaluationEt' | translate}}</label>
        <hois-value value="subject.evaluationEt"></hois-value>
      </md-input-container>
      <md-input-container flex>
        <label>{{'subject.evaluationEn' | translate}}</label>
        <hois-value value="subject.evaluationEn"></hois-value>
      </md-input-container>
      <md-input-container flex>
        <label>{{'subject.additionalInfo' | translate}}</label>
        <hois-value value="subject.additionalInfo"></hois-value>
      </md-input-container>
      <div flex layout="column" ng-show="subject.mandatoryPrerequisiteSubjects.length > 0 || subject.recommendedPrerequisiteSubjects.length > 0 || subject.substituteSubjects.length > 0">
        <fieldset tabindex="1">        
          <legend md-colors="{color: 'default-primary-800'}" class="md-title-small">{{'subject.prerequisiteAndSubstituteSubjects' | translate}}</legend>
          <div ng-show="subject.mandatoryPrerequisiteSubjects.length > 0">
            <h3>{{'subject.mandatoryPrerequisiteSubjects' | translate}}</h3>
            <div layout="column" class="common-label" flex="95" ng-repeat="sub in subject.mandatoryPrerequisiteSubjects | orderBy: ['sub.' + currentLanguageNameField(), 'code']">
              <div layout="row" flex layout-align="start center">
                <div flex="50"><a ng-href="#/subject{{isPublic ? '/public' : ''}}/{{sub.id}}">{{currentLanguageNameField(sub)}}</a></div>
              </div>
            </div>
            <md-divider></md-divider>
          </div>
          <div ng-if="subject.recommendedPrerequisiteSubjects.length > 0">
            <h3>{{'subject.recommendedPrerequisiteSubjects' | translate}}</h3>
            <div layout="column" class="common-label" flex="95" ng-repeat="sub in subject.recommendedPrerequisiteSubjects | orderBy: ['sub.' + currentLanguageNameField(), 'code']">
              <div layout="row" flex layout-align="start center">
                <div flex="50"><a ng-href="#/subject{{isPublic ? '/public' : ''}}/{{sub.id}}">{{currentLanguageNameField(sub)}}</a></div>
              </div>
            </div>
            <md-divider></md-divider>
          </div>
          <div ng-if="subject.substituteSubjects.length > 0">
            <h3>{{'subject.substituteSubjects' | translate}}</h3>
            <div layout="column" class="common-label" flex="95" ng-repeat="sub in subject.substituteSubjects | orderBy: ['sub.' + currentLanguageNameField(), 'code']">
              <div layout="row" flex layout-align="start center">
                <div flex="50"><a ng-href="#/subject{{isPublic ? '/public' : ''}}/{{sub.id}}">{{currentLanguageNameField(sub)}}</a></div>
              </div>
            </div>
            <md-divider></md-divider>
          </div>
        </fieldset>
        <div>&nbsp;</div>
      </div>
      <md-input-container flex>
        <label>{{'subject.linkDepartment' | translate}}</label>
        <hois-value value="currentLanguageNameField(subject.schoolDepartment)"></hois-value>
      </md-input-container>
      <md-input-container flex>
        <label>{{'subject.isPractice' | translate}}</label>
        <hois-value value="subject.isPractice ? 'main.yes' : 'main.no' | translate"></hois-value>
      </md-input-container>
      <md-input-container>
        <label>{{'subject.status' | translate}}</label>
        <hois-classifier-value ng-model="subject.status" main-classifier-code="AINESTAATUS"></hois-classifier-value>
      </md-input-container>
      <md-input-container ng-if="subject.status === 'AINESTAATUS_K'">
        <label>{{'public.url' | translate}}</label>
        <input ng-model="publicUrl" type="text" readonly>
      </md-input-container>
      <div flex ng-show="subject.primarySubjects.length > 0">
        <fieldset tabindex="2">
            <legend md-colors="{color: 'default-primary-800'}" class="md-title-small">{{'subject.subjectIsPrerequisite' | translate}}</legend>
          <div ng-repeat="row in subject.primarySubjects | orderBy: currentLanguageNameField()">
            <a class="md-body-1" ng-href="#/subject{{isPublic ? '/public' : ''}}/{{row.id}}">{{currentLanguageNameField(row)}}</a>
          </div>
        </fieldset>
      </div>
      <div flex ng-show="subject.curriculumVersions.length > 0">
        <div>&nbsp;</div>
        <fieldset tabindex="3">
          <legend md-colors="{color: 'default-primary-800'}" class="md-title-small">{{'subject.belongsCurriculum' | translate}}</legend>
          <div ng-repeat="row in subject.curriculumVersions | orderBy: currentLanguageNameField()">
            <span class="md-body-1">{{currentLanguageNameField(row) }}</span>
          </div>
        </fieldset>
      </div>
      <div flex ng-if="subject.programs.length > 0">
        <div>&nbsp;</div>
        <fieldset tabindex="4">
          <legend md-colors="{color: 'default-primary-800'}" class="md-title-small">{{'subject.subjectProgram.label' | translate}}</legend>
          <div layout="column">
            <md-table-container>
              <table md-table class="secondary-table">
                <thead md-head>
                  <tr md-row>
                    <th md-column>{{'subject.subjectProgram.teacher' | translate}}</th>
                    <th md-column>{{'subject.subjectProgram.studyPeriod' | translate}}</th>
                    <th md-column ng-if="!isPublic && (auth.isAdmin() || auth.isTeacher())">{{'subject.subjectProgram.status' | translate}}</th>
                  </tr>
                </thead>
                <tbody md-body>
                  <tr md-row ng-repeat="program in subject.programs">
                    <td md-cell><a href="#/subjectProgram/{{::(isPublic || !(auth.isAdmin() || auth.isTeacher())  ? 'public' : 'periods')}}/{{::program.id}}/view">{{program.teacherName}}</a></td>
                    <td md-cell><a href="#/subjectProgram/{{::(isPublic || !(auth.isAdmin() || auth.isTeacher()) ? 'public' : 'periods')}}/{{::program.id}}/view">{{currentLanguageNameField(program.studyPeriod)}}</a></td>
                    <td md-cell ng-if="!isPublic && (auth.isAdmin() || auth.isTeacher())"><hois-classifier-value ng-model="program.status" main-classifier-code="AINEPROGRAMM_STAATUS"></hois-classifier-value></td>
                  </tr>
                </tbody>
              </table>
            </md-table-container>
          </div>
        </fieldset>
      </div>
      <div>&nbsp;</div>
      <hois-created-modified object="subject" ng-if="!isPublic"></hois-created-modified>
      <div layout="row">
        <md-button ng-if="subject.canEdit" ng-href="#/subject/{{subject.id}}/edit" class="md-raised md-primary">{{'main.button.change' | translate}}</md-button>
        <md-button ng-click="back(formState.backUrl)" class="md-raised">{{'main.button.back' | translate}}</md-button>
      </div>
    </form>
  </div>
</div>
