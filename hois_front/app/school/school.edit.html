<div class="ois-form-layout-padding ois-form-layout" ng-cloak>
  <form name="schoolForm">
    <!--p class="textInput">{{'school.name' | translate}}&nbsp;*</p-->
    <md-autocomplete md-floating-label="{{'school.name' | translate}}" required md-selected-item="school._ehisSchool" md-search-text="queryText"
          md-items="item in querySearch(queryText)"
          md-item-text="currentLanguage()==='en' ? (item.nameEn || item.nameEt) : item.nameEt"
          md-min-length="0" md-no-cache
          md-selected-item-change="setEhisSchool()">
      <md-item-template>
        <span md-highlight-text="queryText" md-highlight-flags="^i">{{currentLanguage()==='en' ?(item.nameEn || item.nameEt) : item.nameEt}}</span>
      </md-item-template>
      <md-not-found>
        {{'main.messages.error.notFound' | translate}}
      </md-not-found>
    </md-autocomplete>

    <md-input-container class="md-block">
      <label class="textInput">{{'school.nameGenitiveEt' | translate}}</label>
      <input ng-model="school.nameGenitiveEt" name="nameGenitiveEt" type="text" md-maxlength="255">
    </md-input-container>

    <md-input-container class="md-block">
      <label class="textInput">{{'school.code' | translate}}</label>
      <input ng-model="school.code" name="code" type="text" required md-maxlength="10">
    </md-input-container>

    <md-input-container class="md-block">
      <label class="textInput">{{'school.regNr' | translate}}</label>
      <input ng-model="school.regNr" type="text" readonly>
    </md-input-container>

    <md-input-container class="md-block">
      <label class="textInput">{{'school.ehisId' | translate}}</label>
      <input ng-model="school.ehisId" type="text" readonly>
    </md-input-container>

    <md-input-container class="md-block">
      <label class="textInput">{{'school.nameEn' | translate}}</label>
      <input ng-model="school.nameEn" name="nameEn" type="text" required md-maxlength="255">
    </md-input-container>

    <md-input-container class="md-block">
      <label class="textInput">{{'school.email' | translate}}</label>
      <input ng-model="school.email" name="email" type="email" required md-maxlength="255">
    </md-input-container>

    <md-input-container class="md-block">
      <label class="textInput">{{'school.phone' | translate}}</label>
      <input ng-model="school.phone" name="phone" type="text" md-maxlength="100">
    </md-input-container>

    <div class="md-block">
      <hois-ads-adapter class="md-text" ng-model="school.addressAds" ads-oid-model="school.addressAdsOid" address-model="school.address"></hois-ads-adapter>
    </div>

    <md-input-container class="md-block">
      <md-checkbox ng-model="school.generateUserEmail" name="generateUserEmail">
          {{'school.generateUserEmail' | translate}}
      </md-checkbox>
    </md-input-container>

    <md-input-container class="md-block">
      <label class="textInput">{{'school.emailDomain' | translate}}</label>
      <input ng-model="school.emailDomain" name="emailDomain" type="text" md-maxlength="255">
    </md-input-container>

    <md-input-container class="md-block">
      <label class="textInput">{{'school.rtipSchoolCode' | translate}}</label>
      <input ng-model="school.rtipSchoolCode" name="rtipSchoolCode" type="text" md-maxlength="10">
    </md-input-container>

    <div layout="row" layout-xs="column">
      <md-input-container class="md-block">
        <md-checkbox ng-model="school.isNotAbsence" name="isNotAbsence">
          {{'school.isNotAbsence' | translate}}
        </md-checkbox>
      </md-input-container>

      <md-input-container class="md-block">
        <md-checkbox ng-model="school.isMinorStudentAbsence" name="isMinorStudentAbsence" ng-disabled="school.isNotAbsence">
          {{'school.isMinorStudentAbsence' | translate}}
        </md-checkbox>
      </md-input-container>
    </div>

    <md-input-container ng-if="school.type.higher" class="md-block">
      <md-checkbox ng-model="school.isLetterGrade" name="isLetterGrade">
        {{'school.isLetterGrade' | translate}}
      </md-checkbox>
    </md-input-container>

    <md-input-container class="md-block">
      <md-checkbox ng-model="school.isWithoutEkis" name="isWithoutEkis">
        {{'school.isWithoutEkis' | translate}}
      </md-checkbox>
    </md-input-container>

    <md-input-container class="md-block">
      <md-checkbox ng-model="school.isStudentTerms" name="isStudentTerms">
        {{'school.isStudentTerms' | translate}}
      </md-checkbox>
    </md-input-container>

    <md-input-container class="md-block" ng-if="school.type.higher">
      <md-checkbox ng-model="school.isHmodules" name="isHmodules">
          {{'school.isHmodules' | translate}}
      </md-checkbox>
    </md-input-container>

    <md-input-container class="md-block" ng-if="school.type.higher">
      <md-checkbox ng-model="school.isStudentDeclarationDelete" name="isStudentDeclarationDelete">
          {{'school.isStudentDeclarationDelete' | translate}}
      </md-checkbox>
    </md-input-container>

    <div layout-gt-md="row" layout="column">
      <span class="common-label" style="margin-right: 1em; margin-top: 5px;">{{'school.isNotPublic.label' | translate}}:</span>
      <md-input-container class="md-block" style="margin-left: 1em;">
        <md-checkbox ng-model="school.isNotPublic" name="isNotPublic">
          {{'school.isNotPublic.academicCalendar' | translate}}
        </md-checkbox>
      </md-input-container>

      <md-input-container class="md-block" style="margin-left: 1em;">
        <md-checkbox ng-model="school.isNotPublicTimetable" name="isNotPublicTimetable">
          {{'school.isNotPublic.timetable' | translate}}
        </md-checkbox>
      </md-input-container>

      <md-input-container class="md-block" style="margin-left: 1em;">
        <md-checkbox ng-model="school.isNotPublicCurriculum" name="isNotPublicCurriculum">
          {{'school.isNotPublic.curriculums' | translate}}
        </md-checkbox>
      </md-input-container>

      <md-input-container ng-if="school.type.higher" class="md-block" style="margin-left: 1em;">
        <md-checkbox ng-model="school.isNotPublicSubject" name="isNotPublicSubject">
          {{'school.isNotPublic.subjects' | translate}}
        </md-checkbox>
      </md-input-container>
    </div>

    <div class="custom-radio" layout-gt-sm="row" layout="column" layout-align="start start" layout-align-gt-sm="start center">
      <span class="common-label" style="margin-right: 1em;">{{'school.studentPhotoAdd' | translate}}:</span>
      <md-radio-group layout-gt-xs="row" ng-model="school.studentPhotoAdd" name="studentPhotoAdd" required>
        <md-radio-button value="FOTOLISA_KOIK" aria-label="{{currentLanguageNameField(clPhoto['FOTOLISA_KOIK'])}}">
          {{currentLanguageNameField(clPhoto['FOTOLISA_KOIK'])}}
        </md-radio-button>
        <md-radio-button value="FOTOLISA_TAIS" aria-label="{{currentLanguageNameField(clPhoto['FOTOLISA_TAIS'])}}">
          {{currentLanguageNameField(clPhoto['FOTOLISA_TAIS'])}}
        </md-radio-button>
        <md-radio-button value="FOTOLISA_EI" aria-label="{{currentLanguageNameField(clPhoto['FOTOLISA_EI'])}}">
          {{currentLanguageNameField(clPhoto['FOTOLISA_EI'])}}
        </md-radio-button>
      </md-radio-group>
    </div>

    <div class="custom-radio" layout-gt-sm="row" layout="column" layout-align="start start" layout-align-gt-sm="start center">
      <span class="common-label" style="margin-right: 1em;">{{'school.timetable' | translate}}:</span>
      <hois-classifier-radio layout-gt-xs="row" ng-model="school.timetable" name="timetable" model-value-attr="code" order="value"
        main-classifier-code="TIMETABLE" required></hois-classifier-radio>
    </div>

    <md-input-container class="md-block">
      <label class="textInput">{{'school.adUrl' | translate}}</label>
      <input ng-model="school.adUrl" name="adUrl" type="text" md-maxlength="255">
    </md-input-container>

    <md-input-container class="md-block">
      <label class="textInput">{{'school.adPort' | translate}}</label>
      <input ng-model="school.adPort" name="adPort" type="number" min="0" max="32767">
    </md-input-container>

    <md-input-container class="md-block">
      <label class="textInput">{{'school.adDomain' | translate}}</label>
      <input ng-model="school.adDomain" name="adDomain" type="text" md-maxlength="255">
    </md-input-container>

    <md-input-container class="md-block">
      <label class="textInput">{{'school.adBase' | translate}}</label>
      <input ng-model="school.adBase" name="adBase" type="text" md-maxlength="255">
    </md-input-container>

    <md-input-container class="md-block">
      <label class="textInput">{{'school.adIdcodeField' | translate}}</label>
      <input ng-model="school.adIdcodeField" name="adIdcodeField" type="text" md-maxlength="50">
    </md-input-container>

    <md-input-container class="md-block">
      <label class="textInput">{{'school.finalSchoolType' | translate}}</label>
      <input ng-model="school.finalSchoolType" name="finalSchoolType" type="text" md-maxlength="100">
    </md-input-container>

    <md-input-container class="md-block">
      <label class="textInput">{{'school.final62' | translate}}</label>
      <textarea ng-model="school.final62" name="final62" md-maxlength="500" max-rows="10"></textarea>
    </md-input-container>

    <md-input-container class="md-block">
      <label class="textInput">{{'school.finalSchoolTypeEn' | translate}}</label>
      <input ng-model="school.finalSchoolTypeEn" name="finalSchoolType" type="text" md-maxlength="100">
    </md-input-container>

    <md-input-container class="md-block">
      <label class="textInput">{{'school.finalEn62' | translate}}</label>
      <textarea ng-model="school.finalEn62" name="finalEn62" md-maxlength="500" max-rows="10"></textarea>
    </md-input-container>

    <md-input-container class="md-block">
      <label class="textInput">{{'school.ekisUrl' | translate}}</label>
      <input ng-model="school.ekisUrl" name="ekisUrl" type="text" md-maxlength="4000">
    </md-input-container>

    <lf-ng-md-file-input name="logoFiles"
      lf-files="logoFiles" lf-api="logoFileApi" lf-filesize="100KB"
      accept=".png, .jpg, .jpeg" lf-mimetype="image/*" preview
      lf-placeholder="{{'school.logo.notSelected' | translate}}"
      lf-browse-label="{{'school.logo.selectLogo' | translate}}"
      lf-remove-label="{{'main.button.clear' | translate}}"></lf-ng-md-file-input>

    <div ng-messages="schoolForm.logoFiles.$error" style="color:red;">
      <div ng-message="filesize">{{'main.messages.error.fileTooLarge' | translate}} 100KB!</div>
      <div ng-message="mimetype">{{'main.messages.error.wrongExtension' | translate}} png, jpg, jpeg</div>
    </div>
  </form>

  <h3 ng-if="school.logo">{{'school.logo.currentLogo' | translate}}</h3>
  <img ng-if="school.logo" ng-src="{{school.imageUrl}}" id="currentLogoView">
  <br>
  <md-checkbox ng-model="school.deleteCurrentLogo" ng-if="school.id && school.logo && !logoFiles[0]">
      {{'school.logo.delete' | translate}}
  </md-checkbox>
  <br>
  <md-button ng-click="update()" class="md-raised md-primary">{{'main.button.save' | translate}}</md-button>
  <md-button ng-click="delete()" ng-if="school.id" class="md-raised">{{'main.button.delete' | translate}}</md-button>
  <md-button ng-click="back('#/school', schoolForm)" class="md-raised">{{'main.button.back' | translate}}</md-button>
</div>

<style>
div.custom-radio {
  margin-bottom: 8px;
}

div.custom-radio md-radio-group {
  color: rgb(150, 150, 150);
}

div.custom-radio md-radio-button {
  margin-top: 4px;
  margin-bottom: 4px;
}
</style>
