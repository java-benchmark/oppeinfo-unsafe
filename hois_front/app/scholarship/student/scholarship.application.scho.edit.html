<div class="ois-form-layout-padding" ng-cloak>
  <hois-whiteframe-warning ng-if="application.id && application.canApply">
    <span>{{'stipend.messages.applicationUnapplied' | translate}}</span>
    <span ng-if="stipend.applicationEnd">{{'stipend.messages.submissionDeadline' | translate: {deadline: (stipend.applicationEnd | hoisDate)} }}</span>
  </hois-whiteframe-warning>

  <fieldset tabindex="1">
    <legend md-colors="{color: 'primary-800'}" class="md-title-small">{{'stipend.student.scholarshipTerms' | translate}}</legend>
    <div class="form-readonly ois-form-layout-padding">
      <div layout="row" flex>
        <md-input-container flex="45">
          <label class="textInput">{{'stipend.scholarshipType' | translate}}</label>
          <hois-classifier-value ng-model="stipend.type" main-classifier-code="STIPTOETUS"></hois-classifier-value>
        </md-input-container>
        <md-input-container flex="50" flex-offset="5">
          <label>{{'stipend.places' | translate}}</label>
          <hois-value value="stipend.places"></hois-value>
        </md-input-container>
      </div>
      <div layout="row" flex>
        <md-input-container flex="45">
          <label class="textInput">{{'stipend.studyPeriod' | translate}}</label>
          <hois-value value="currentLanguageNameField(stipend.studyPeriod)"></hois-value>
        </md-input-container>
        <md-input-container flex="50" flex-offset="5">
          <label>{{'stipend.amountPaid' | translate}}</label>
          <hois-value value="stipend.amountPaid"></hois-value>
        </md-input-container>
      </div>
      <div layout="column" flex="45">
        <md-input-container>
          <label class="textInput">{{'stipend.studyLoad' | translate}}</label>
          <hois-classifier-value ng-model="stipend.studyLoads" main-classifier-code="OPPEKOORMUS" multiple></hois-classifier-value>
        </md-input-container>
        <md-input-container ng-if="isNumber(stipend.averageMark)">
          <label class="textInput">{{'stipend.averageMark' | translate}}</label>
          <hois-value value="stipend.averageMark"></hois-value>
        </md-input-container>
        <md-input-container ng-if="isNumber(stipend.wagMark)">
          <label class="textInput">{{'stipend.wagMark' | translate}}</label>
          <hois-value value="stipend.wagMark"></hois-value>
        </md-input-container>
        <md-input-container ng-if="isNumber(stipend.lastPeriodMark)">
          <label class="textInput">{{'stipend.lastPeriodMark' | translate}}</label>
          <hois-value value="stipend.lastPeriodMark"></hois-value>
        </md-input-container>
        <md-input-container ng-if="isNumber(stipend.lastPeriodWagMark)">
          <label class="textInput">{{'stipend.lastPeriodWagMark' | translate}}</label>
          <hois-value value="stipend.lastPeriodWagMark"></hois-value>
        </md-input-container>
        <md-input-container ng-if="isNumber(stipend.curriculumCompletion)">
          <label class="textInput">{{'stipend.curriculumCompletion' | translate}}</label>
          <hois-value value="stipend.curriculumCompletion"></hois-value>
        </md-input-container>
      </div>
      <div layout="row">
        <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100">
          <label>{{'stipend.studyPeriodDates' | translate}}</label>
          <input type="hidden">
        </md-input-container>
        <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5">
          <label>{{'main.from' | translate}}</label>
          <hois-value value="stipend.studyStartPeriodStart | hoisDate"></hois-value>
        </md-input-container>
        <md-input-container flex="50" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5">
          <label>{{'main.thru' | translate}}</label>
          <hois-value value="stipend.studyStartPeriodEnd | hoisDate"></hois-value>
        </md-input-container>
      </div>
      <div layout="row">
        <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100">
          <label>{{'stipend.paymentPeriod' | translate}}</label>
          <input type="hidden">
        </md-input-container>
        <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5">
          <label>{{'main.from' | translate}}</label>
          <hois-value value="stipend.paymentStart | hoisDate"></hois-value>
        </md-input-container>
        <md-input-container flex="50" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5">
          <label>{{'main.thru' | translate}}</label>
          <hois-value value="stipend.paymentEnd | hoisDate"></hois-value>
        </md-input-container>
      </div>
      <div layout="row" flex>
        <div flex>
          <md-checkbox ng-model="stipend.isAcademicLeave" disabled aria-label="Is academic leave">
            {{'stipend.isAcademicLeave' | translate}}
          </md-checkbox>
        </div>
      </div>
    </div>
  </fieldset>

  <div>&nbsp;</div>

  <fieldset tabindex="1" ng-if="termCompliance && !termCompliance.fullyComplies">
    <legend md-colors="{color: 'default-warn'}" class="md-title-small">{{'stipend.messages.error.studentDoesntComplyScholarship' | translate}}</legend>
    <div flex ng-include="'scholarship/templates/scholarship.term.compliance.list.html'"></div>
  </fieldset>

  <div>&nbsp;</div>

  <fieldset tabindex="1">
    <legend md-colors="{color: 'primary-800'}" class="md-title-small">{{'stipend.student.myData' | translate}}</legend>

    <div class="form-readonly ois-form-layout-padding">
      <div layout="column" flex="45">
        <md-input-container ng-if="application.useSaisPoints">
          <label class="textInput">{{'stipend.saisPoints' | translate}}</label>
          <hois-value value="application.saisPoints"></hois-value>
        </md-input-container>
        <md-input-container ng-if="!application.useSaisPoints && (isNumber(stipend.averageMark) || isNumber(application.averageMark))">
          <label class="textInput">{{'stipend.averageMark' | translate}}</label>
          <hois-value value="application.averageMark"></hois-value>
        </md-input-container>
        <md-input-container ng-if="!application.useSaisPoints && (isNumber(stipend.wagMark) || isNumber(application.wagMark))">
          <label>{{'stipend.wagMark' | translate}}</label>
          <hois-value value="application.wagMark"></hois-value>
        </md-input-container>
        <md-input-container ng-if="!application.useSaisPoints && (isNumber(stipend.lastPeriodMark) || isNumber(application.lastPeriodMark))">
          <label>{{'stipend.lastPeriodMark' | translate}}</label>
          <hois-value value="application.lastPeriodMark"></hois-value>
        </md-input-container>
        <md-input-container ng-if="!application.useSaisPoints && (isNumber(stipend.lastPeriodWagMark) || isNumber(application.lastPeriodWagMark))">
          <label>{{'stipend.lastPeriodWagMark' | translate}}</label>
          <hois-value value="application.lastPeriodWagMark"></hois-value>
        </md-input-container>
      </div>
      <div layout="row" flex>
        <md-input-container flex="45">
          <label class="textInput">{{'stipend.curriculumCompletion' | translate}}</label>
          <hois-value value="application.curriculumCompletion"></hois-value>
        </md-input-container>
        <md-input-container flex="50" flex-offset="5">
          <label class="textInput">{{'stipend.credits' | translate}}</label>
          <hois-value value="application.credits"></hois-value>
        </md-input-container>
      </div>
    </div>

    <ng-form name="applicationForm">
      <div layout="row" flex>
        <md-input-container flex="45" flex-md="100" flex-sm="100" flex-xs="100">
          <label>{{'stipend.student.bankAccount' | translate}}</label>
          <input type="text" ng-model="application.bankAccount" name="bankAccount" required md-maxlength="50">
        </md-input-container>
      </div>
      <div layout="row" flex>
        <md-input-container flex="100" flex-md="100" flex-sm="100" flex-xs="100">
          <label>{{'stipend.student.professionalAchievements' | translate}}</label>
          <textarea ng-model="application.addInfo" name="addInfo" md-maxlength="4000"></textarea>
        </md-input-container>
      </div>
      <br/>
      <div ng-include="'scholarship/scholarship.relatedFiles.edit.html'"></div>
      <br/>

      <div layout="row" flex class="form-readonly">
        <md-input-container flex="45" flex-md="100" flex-sm="100" flex-xs="100">
          <label>{{'stipend.student.status' | translate}}</label>
          <hois-classifier-value ng-model="application.status" main-classifier-code="STIPTOETUS_STAATUS"></hois-classifier-value>
        </md-input-container>
      </div>

      <div layout="row">
        <md-button class="md-raised md-primary" ng-if="application.canApply" ng-click="update(applicationForm)">{{'main.button.save' | translate}}</md-button>
        <md-button class="md-raised md-primary" ng-if="application.canApply" ng-click="apply(applicationForm)">{{'main.button.submit' | translate}}</md-button>
        <md-button class="md-raised" ng-click="back(isStudent() ? '#/scholarships/myData/scholarships' : '#/scholarships/applications/scholarships', applicationForm)">
          {{'main.button.back' | translate}}</md-button>
      </div>
    </ng-form>
  </fieldset>
</div>
