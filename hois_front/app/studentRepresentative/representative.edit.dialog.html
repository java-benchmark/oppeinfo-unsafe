<md-dialog aria-label="grade add dialog" flex="30" flex-xs="100">
  <form name="studentRepresentativeEditForm" novalidate ng-cloak>
    <md-dialog-content>
      <div class="md-dialog-content">
        <fieldset tabindex="1" ng-if="!record.id" class="form-readonly">
          <legend md-colors="{color: 'primary-800'}" class="md-title-small">{{'student.representative.student' | translate}}</legend>

          <md-input-container class="md-block">
            <label>{{'student.representative.studentIdcode' | translate}}</label>
            <hois-value value="formState.student.person.idcode"></hois-value>
          </md-input-container>

          <md-input-container class="md-block">
            <label>{{'student.name' | translate}}</label>
            <hois-value value="formState.student.person.fullname"></hois-value>
          </md-input-container>
        </fieldset>

        <fieldset tabindex="2">
          <legend md-colors="{color: 'primary-800'}" class="md-title-small">{{'student.representative.data' | translate}}</legend>

          <md-input-container class="md-block">
            <label>{{'student.representative.idcode' | translate}}</label>
            <input type="text" name="idcode" ng-model="record.person.idcode" ng-blur="lookupPerson()" md-minlength="11" md-maxlength="11" ng-readonly="record.id" required md-autofocus="!record.id">
            <div class="invalid" ng-show="studentRepresentativeEditForm.idcode.$error.notUnique">
              {{'student.representative.samewithstudent' | translate}}
            </div>
            <div class="invalid" ng-show="studentRepresentativeEditForm.idcode.$error.estonianIdcode">
              {{'main.messages.error.estonianIdcode' | translate}}
            </div>
          </md-input-container>

          <md-input-container class="md-block">
            <label>{{'student.representative.firstname' | translate}}</label>
            <input ng-model="record.person.firstname" name="firstname" type="text" ng-readonly="record.id || formState.idcode" required md-maxlength="255">
          </md-input-container>

          <md-input-container class="md-block">
            <label>{{'student.representative.lastname' | translate}}</label>
            <input ng-model="record.person.lastname" name="lastname" type="text" ng-readonly="record.id || formState.idcode" required md-maxlength="255">
          </md-input-container>

          <md-input-container class="md-block">
            <label>{{'student.representative.relation' | translate}}</label>
            <hois-classifier-select ng-model="record.relation" name="relation" ng-disabled="record.id" main-classifier-code="OPPURESINDAJA" required model-value-attr="code"></hois-classifier-select>
          </md-input-container>

          <md-input-container class="md-block">
            <label>{{'student.representative.phone' | translate}}</label>
            <input ng-model="record.person.phone" name="phone" type="text" required md-maxlength="100" md-autofocus="!record.id">
          </md-input-container>

          <md-input-container class="md-block">
            <label>{{'student.representative.email' | translate}}</label>
            <input ng-model="record.person.email" name="email" type="text" required md-maxlength="100">
          </md-input-container>

          <md-checkbox ng-model="record.isStudentVisible" name="isStudentVisible" ng-disabled="isParent" ng-if="record.id">
            {{'student.representative.studentVisible' | translate}}
          </md-checkbox>
        </fieldset>
      </div>
    </md-dialog-content>

    <md-dialog-actions layout="row" layout-align="start center">
      <md-button ng-click="update()" class="md-raised md-primary">{{'main.button.save' | translate}}</md-button>
      <md-button ng-click="delete()" ng-if="record.id && record.userCanDelete" class="md-raised">{{'main.button.delete' | translate}}</md-button>
      <md-button ng-click="cancel()" class="md-raised">{{'main.button.close' | translate}}</md-button>
    </md-dialog-actions>
  </form>
</md-dialog>
